# ì‘ì—… ì§„í–‰ ìƒí™© ë©”ëª¨

## ë‚ ì§œ: 2025ë…„ 11ì›” 13ì¼

## í˜„ì¬ ì‘ì—… ì¤‘ì¸ ê¸°ëŠ¥
ê´€ë¦¬ì í˜ì´ì§€ì— ë‹¤ìŒ ê¸°ëŠ¥ë“¤ì„ ì¶”ê°€í•˜ëŠ” ì‘ì—…:

1. âœ… **ë©”ë‰´ ì¶”ê°€/ìˆ˜ì •/ì‚­ì œ ê¸°ëŠ¥** - ì™„ë£Œ
2. âœ… **ì˜µì…˜ ê´€ë¦¬ ê¸°ëŠ¥** - ì™„ë£Œ
3. âœ… **ë©”ë‰´ ì´ë¯¸ì§€ ì—…ë¡œë“œ ê¸°ëŠ¥** - ì½”ë“œ ì‘ì„± ì™„ë£Œ, í…ŒìŠ¤íŠ¸ í•„ìš”

## ì™„ë£Œëœ ì‘ì—…

### ë°±ì—”ë“œ (ì„œë²„)
- âœ… multer íŒ¨í‚¤ì§€ ì„¤ì¹˜ ì™„ë£Œ (`npm install multer`)
- âœ… ì´ë¯¸ì§€ ì—…ë¡œë“œ ë¼ìš°íŠ¸ ì¶”ê°€ (`server/src/routes/menus.js`)
  - POST `/api/menus/:menuId/image` ì—”ë“œí¬ì¸íŠ¸
  - multer ì„¤ì •: íŒŒì¼ í¬ê¸° 5MB ì œí•œ, ì´ë¯¸ì§€ íŒŒì¼ë§Œ í—ˆìš©
  - ì €ì¥ ìœ„ì¹˜: `ui/public/images/menus/`
- âœ… ì´ë¯¸ì§€ ì—…ë¡œë“œ ì»¨íŠ¸ë¡¤ëŸ¬ ì¶”ê°€ (`server/src/controllers/menuController.js`)
  - `uploadMenuImage` í•¨ìˆ˜ êµ¬í˜„
  - DBì— ì´ë¯¸ì§€ ê²½ë¡œ ì €ì¥

### í”„ë¡ íŠ¸ì—”ë“œ (UI)
- âœ… ë©”ë‰´ ëª¨ë‹¬ì— ì´ë¯¸ì§€ ì—…ë¡œë“œ ê¸°ëŠ¥ ì¶”ê°€ (`AdminPage.jsx`)
  - íŒŒì¼ ì„ íƒ input
  - ì´ë¯¸ì§€ ë¯¸ë¦¬ë³´ê¸° ê¸°ëŠ¥
  - íŒŒì¼ í¬ê¸°/íƒ€ì… ê²€ì¦
- âœ… API ì„œë¹„ìŠ¤ì— ì´ë¯¸ì§€ ì—…ë¡œë“œ í•¨ìˆ˜ ì¶”ê°€ (`ui/src/services/api.js`)
  - `menuApi.uploadMenuImage(menuId, imageFile)`
- âœ… CSS ìŠ¤íƒ€ì¼ ì¶”ê°€ (`AdminPage.css`)
- âœ… uploads ë””ë ‰í† ë¦¬ ìƒì„± (`ui/public/images/menus/`)
- âœ… .gitignore ì„¤ì • (ì—…ë¡œë“œëœ ì´ë¯¸ì§€ ì œì™¸)

## ğŸš¨ í˜„ì¬ ë¬¸ì œ ìƒí™©

### ë°ì´í„°ë² ì´ìŠ¤ ì—°ê²° ë¬¸ì œ
ì„œë²„ê°€ ì‹œì‘ ë©”ì‹œì§€ëŠ” ì¶œë ¥í•˜ì§€ë§Œ ì‹¤ì œë¡œ í¬íŠ¸ 5000ì´ ì—´ë¦¬ì§€ ì•ŠìŒ

**ì¦ìƒ:**
- `ğŸš€ ì„œë²„ê°€ í¬íŠ¸ 5000ì—ì„œ ì‹¤í–‰ì¤‘ì…ë‹ˆë‹¤` ë©”ì‹œì§€ëŠ” ì¶œë ¥ë¨
- í•˜ì§€ë§Œ `netstat -ano | findstr :5000` ê²°ê³¼ í¬íŠ¸ê°€ ì—´ë ¤ìˆì§€ ì•ŠìŒ
- API í˜¸ì¶œ ì‹œ `ERR_CONNECTION_REFUSED` ì˜¤ë¥˜
- ê´€ë¦¬ì í˜ì´ì§€ ì ‘ì† ì‹œ "ë°ì´í„°ë¥¼ ë¶ˆëŸ¬ì˜¤ëŠ”ë° ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤" ì˜¤ë¥˜

**ë°ì´í„°ë² ì´ìŠ¤ ì—°ê²° í…ŒìŠ¤íŠ¸ ê²°ê³¼:**
- âœ… ë‹¨ìˆœ ì—°ê²° í…ŒìŠ¤íŠ¸ëŠ” ì„±ê³µ (`test-db.js` ì‹¤í–‰ ì„±ê³µ)
- âœ… PostgreSQL ì„œë¹„ìŠ¤ ì‹¤í–‰ ì¤‘ (`postgresql-x64-18` Running)
- âŒ ì„œë²„ ì• í”Œë¦¬ì¼€ì´ì…˜ì€ ì‹œì‘ í›„ ì¦‰ì‹œ ì¢…ë£Œë˜ëŠ” ê²ƒìœ¼ë¡œ ë³´ì„

**ì›ì¸ ì¶”ì •:**
- `server/src/config/database.js`ì˜ `pool.on('error')` í•¸ë“¤ëŸ¬ê°€ `process.exit(-1)` í˜¸ì¶œ
- ë°ì´í„°ë² ì´ìŠ¤ ì—°ê²° í’€ ì´ˆê¸°í™” ì¤‘ ì—ëŸ¬ ë°œìƒ ê°€ëŠ¥ì„±
- ì—ëŸ¬ ë¡œê·¸ê°€ ì¶œë ¥ë˜ì§€ ì•Šì•„ ì •í™•í•œ ì›ì¸ íŒŒì•… ì–´ë ¤ì›€

### í™˜ê²½ ì„¤ì • (server/.env)
```env
DB_HOST=localhost
DB_PORT=5432
DB_NAME=coffee_order_db
DB_USER=postgres
DB_PASSWORD=7337
PORT=5000
NODE_ENV=development
FRONTEND_URL=http://localhost:3000
```

## PC ì¬ë¶€íŒ… í›„ í•´ì•¼ í•  ì¼

### 1. ì„œë²„ ì§ì ‘ ì‹¤í–‰í•˜ì—¬ ì—ëŸ¬ í™•ì¸
```bash
cd server
node server.js
```
- ì „ì²´ ì—ëŸ¬ ë¡œê·¸ í™•ì¸
- ë°ì´í„°ë² ì´ìŠ¤ ì—°ê²° ì—ëŸ¬ ë©”ì‹œì§€ í™•ì¸

### 2. PostgreSQL ë¹„ë°€ë²ˆí˜¸ ì¬í™•ì¸
ë§Œì•½ ë¹„ë°€ë²ˆí˜¸ê°€ í‹€ë ¸ë‹¤ë©´ `.env` íŒŒì¼ ìˆ˜ì •:
```env
DB_PASSWORD=ì‹¤ì œë¹„ë°€ë²ˆí˜¸
```

### 3. ì„ì‹œ í•´ê²°ì±… - ì—ëŸ¬ í•¸ë“¤ëŸ¬ ìˆ˜ì •
ë¬¸ì œê°€ ê³„ì†ë˜ë©´ `server/src/config/database.js` ìˆ˜ì •:
```javascript
pool.on('error', (err) => {
  console.error('âŒ ë°ì´í„°ë² ì´ìŠ¤ ì—°ê²° ì˜¤ë¥˜:', err);
  // process.exit(-1); // ì´ ì¤„ ì£¼ì„ ì²˜ë¦¬
});
```

### 4. ì„œë²„ ì¬ì‹œì‘
```bash
cd server
npm run dev
```

### 5. í”„ë¡ íŠ¸ì—”ë“œ í™•ì¸
```bash
cd ui
npm run dev
```

### 6. í…ŒìŠ¤íŠ¸
- ë¸Œë¼ìš°ì €ì—ì„œ http://localhost:3000/admin ì ‘ì†
- ë©”ë‰´ ê´€ë¦¬ íƒ­ì—ì„œ ì´ë¯¸ì§€ ì—…ë¡œë“œ í…ŒìŠ¤íŠ¸

## ì°¸ê³  íŒŒì¼ ìœ„ì¹˜

### ìˆ˜ì •ëœ íŒŒì¼ë“¤
- `server/src/routes/menus.js` - ì´ë¯¸ì§€ ì—…ë¡œë“œ ë¼ìš°íŠ¸
- `server/src/controllers/menuController.js` - ì´ë¯¸ì§€ ì—…ë¡œë“œ ì»¨íŠ¸ë¡¤ëŸ¬
- `ui/src/services/api.js` - ì´ë¯¸ì§€ ì—…ë¡œë“œ API
- `ui/src/pages/AdminPage.jsx` - ì´ë¯¸ì§€ ì—…ë¡œë“œ UI
- `ui/src/pages/AdminPage.css` - ìŠ¤íƒ€ì¼
- `server/.env` - ë°ì´í„°ë² ì´ìŠ¤ ì„¤ì •
- `ui/.gitignore` - ì—…ë¡œë“œ ì´ë¯¸ì§€ ì œì™¸

### ìƒì„±ëœ íŒŒì¼/í´ë”
- `ui/public/images/menus/` - ì´ë¯¸ì§€ ì €ì¥ ë””ë ‰í† ë¦¬
- `ui/public/images/menus/.gitkeep` - Git ë””ë ‰í† ë¦¬ ìœ ì§€
- `server/test-db.js` - DB ì—°ê²° í…ŒìŠ¤íŠ¸ ìŠ¤í¬ë¦½íŠ¸
